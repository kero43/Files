(self.webpackChunklandrick_angular=self.webpackChunklandrick_angular||[]).push([[281],{39281:function(e,t,n){"use strict";n.r(t),n.d(t,{UserModule:function(){return We}});var i=n(40098),o=n(10384),s=n(58348),a=n(3617),r=n(70661),l=n(18582),p=n(80329),d=n(91111),c=n(47445),g=n(36020);function u(e,t){1&e&&(s.TgZ(0,"span"),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"PASSWORD.SECRET_REQ")," "))}function m(e,t){1&e&&s._UZ(0,"p-progressSpinner")}function h(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"form"),s.TgZ(1,"div",19),s.TgZ(2,"div",20),s.TgZ(3,"div",21),s.TgZ(4,"label",22),s._uU(5),s.ALo(6,"translate"),s.qZA(),s.TgZ(7,"div",23),s._UZ(8,"i-feather",24),s.TgZ(9,"input",25),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().new_pass=t}),s.ALo(10,"translate"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(11,"div",20),s.TgZ(12,"div",21),s.TgZ(13,"label",22),s._uU(14),s.ALo(15,"translate"),s.qZA(),s.TgZ(16,"div",23),s._UZ(17,"i-feather",24),s.TgZ(18,"input",26),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().pass_confirmation=t}),s.ALo(19,"translate"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(20,"div",27),s.TgZ(21,"div",28),s._uU(22," The secret code will be sent to you by email "),s.qZA(),s.TgZ(23,"div",29),s.TgZ(24,"form"),s.TgZ(25,"input",30),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().resetToken=t}),s.qZA(),s.TgZ(26,"button",31),s.NdJ("click",function(){return s.CHM(e),s.oxw().requestToken()}),s.YNc(27,u,3,3,"span",32),s.YNc(28,m,1,0,"ng-template",null,33,s.W1O),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.MAs(29),t=s.oxw();s.xp6(5),s.hij(" ",s.lcZ(6,9,"PASSWORD.NEW")," "),s.xp6(4),s.s9C("placeholder",s.lcZ(10,11,"PASSWORD.NEW")),s.Q6J("ngModel",t.new_pass),s.xp6(5),s.Oqu(s.lcZ(15,13,"PASSWORD.CONFIRM")),s.xp6(4),s.s9C("placeholder",s.lcZ(19,15,"PASSWORD.CONFIRM")),s.Q6J("ngModel",t.pass_confirmation),s.xp6(7),s.Q6J("ngModel",t.resetToken),s.xp6(2),s.Q6J("ngIf",!t.sendingSecret)("ngIfElse",e)}}let Z=(()=>{class e{constructor(e,t,n,i,o){this.tokenStorage=e,this.message=t,this.userService=n,this.groupService=i,this.translate=o,this.editing=!1,this.sendingSecret=!1,this.iconName="edit",this.editLabel="Edit"}ngOnInit(){this.translateLabel("EDIT"),this.user=this.tokenStorage.getUser(),this.getGroup()}translateLabel(e){this.translate.get("ACTION."+e).subscribe(e=>{this.editLabel=e})}getGroup(){this.groupService.getGroupByClient(this.user.id).subscribe(e=>{this.group=e[e.length-1]})}toggleEditing(){this.editing?this.new_pass.length>0&&this.pass_confirmation.length>0&&this.resetToken.length>0?this.userService.editPassword(this.user.email,this.new_pass,this.pass_confirmation,this.resetToken).subscribe(e=>{console.log(e),this.editing=!1,this.iconName="edit",this.translateLabel("EDIT"),this.showMessage("success","Success","Password successfully changed")},e=>{console.log(e),this.showMessage("error","Error","Please verify your credentials")}):this.showMessage("warn","Warning","Please fill out the form"):(this.new_pass="",this.pass_confirmation="",this.resetToken="",this.editing=!0,this.iconName="save",this.translateLabel("SAVE"))}requestToken(){this.sendingSecret=!0,this.userService.requestToken(this.user.email).subscribe(e=>{console.log(e),this.showMessage("success","Secret sent","Please check your email inbox"),this.sendingSecret=!1},e=>{console.log(e),this.showMessage("error","Something went wrong!","Try again later"),this.sendingSecret=!1})}showMessage(e,t,n){this.message.add({severity:e,summary:t,detail:n})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(a.i),s.Y36(r.ez),s.Y36(l.K),s.Y36(p.l),s.Y36(d.sK))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-account"]],decls:26,vars:11,consts:[[1,"modal-content","rounded","shadow","border-0","pb-4"],[1,"modal-body","py-2"],[1,"border-bottom","pb-4"],[1,"row"],[1,"col-md-6","mt-4"],[1,"mt-2"],[1,"d-flex","align-items-center"],["name","mail",1,"fea","icon-ex-md","text-muted","me-3"],[1,"flex-1"],[1,"text-primary","mb-0"],["href","javascript:void(0)",1,"text-muted"],[1,"col-md-6","mt-4","pt-2"],[1,"text-md-start","text-center"],[1,"col-md-6","mt-2","pt-3"],[1,"btn",2,"float","right",3,"ngClass","click"],[1,"fea","icon-sm",3,"name"],[1,"btn-label"],[4,"ngIf"],["position","top-right"],[1,"row","mt-4"],[1,"col-md-6"],[1,"mb-3"],[1,"form-label"],[1,"form-icon","position-relative"],["name","key",1,"fea","icon-sm","icons"],["name","password","id","password","type","password","required","",1,"form-control","ps-5",3,"placeholder","ngModel","ngModelChange"],["name","passwordConfirmation","id","passwordConfirmation","type","password","required","",1,"form-control","ps-5",3,"placeholder","ngModel","ngModelChange"],[1,"col-lg-12","pt-2"],["role","alert",1,"alert","alert-info"],[1,"subcribe-form"],["name","secret","id","secret","type","password","placeholder","Secret","required","",1,"form-control","rounded-pill","shadow",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-pills","btn-info",3,"click"],[4,"ngIf","ngIfElse"],["secretSpinner",""]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s.TgZ(6,"div",6),s._UZ(7,"i-feather",7),s.TgZ(8,"div",8),s.TgZ(9,"h6",9),s._uU(10),s.ALo(11,"translate"),s.qZA(),s.TgZ(12,"a",10),s._uU(13),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"div",3),s.TgZ(15,"div",11),s.TgZ(16,"h5",12),s._uU(17),s.ALo(18,"translate"),s.qZA(),s.qZA(),s.TgZ(19,"div",13),s.TgZ(20,"div",14),s.NdJ("click",function(){return t.toggleEditing()}),s._UZ(21,"i-feather",15),s.TgZ(22,"span",16),s._uU(23),s.qZA(),s.qZA(),s.qZA(),s.YNc(24,h,30,17,"form",17),s.qZA(),s.qZA(),s.qZA(),s._UZ(25,"p-toast",18)),2&e&&(s.xp6(10),s.hij(" ",s.lcZ(11,7,"PERSON.EMAIL")," "),s.xp6(3),s.hij(" ",t.user.email," "),s.xp6(4),s.hij(" ",s.lcZ(18,9,"PASSWORD.SIMPLE")," "),s.xp6(3),s.Q6J("ngClass",t.editing?"btn-success":"btn-primary"),s.xp6(1),s.Q6J("name",t.iconName),s.xp6(2),s.Oqu(t.editLabel),s.xp6(1),s.Q6J("ngIf",t.editing))},directives:[c.uy,i.mk,i.O5,g.FN],pipes:[d.X$],styles:[".avatar.avatar-ex-sm[_ngcontent-%COMP%]{max-height:40px}.form-icon[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{top:25%;left:18px}[_nghost-%COMP%]     .p-progress-spinner{width:1.5rem;height:auto;display:flex}"]}),e})();var f=n(55066),v=n(39634),T=n(83550),A=n(37722),b=n(25139),x=n(40358),q=n(98987);function _(e,t){1&e&&(s._UZ(0,"i",17),s.TgZ(1,"div",18),s._uU(2),s.ALo(3,"translate"),s.qZA()),2&e&&(s.xp6(2),s.hij(" ",s.lcZ(3,1,"APPOINTMENT.24H")," "))}function y(e,t){1&e&&(s.TgZ(0,"p-messages",15),s.YNc(1,_,4,3,"ng-template",16),s.qZA())}function C(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"span",34),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw(4).setSlotedit(t.time)}),s.qZA()}if(2&e){const e=s.oxw().$implicit;s.Q6J("label",e.time)("value",e.time)}}function U(e,t){if(1&e&&s._UZ(0,"span",35),2&e){const e=s.oxw().$implicit;s.Q6J("label",e.time)("value",e.time)}}function w(e,t){if(1&e&&(s.TgZ(0,"span",31),s.YNc(1,C,1,2,"span",32),s.YNc(2,U,1,2,"span",33),s.qZA()),2&e){const e=t.$implicit,n=s.oxw(4);s.xp6(1),s.Q6J("ngIf",n.group.appointment.appointmentTime!=e.time&&e.freeSpots>0&&!n.slotIsBeforeNow(e)),s.xp6(1),s.Q6J("ngIf",n.group.appointment.appointmentTime==e.time&&!n.slotIsBeforeNow(e))}}const M=function(){return{width:"40%",height:"25rem",display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",overflow:"auto"}};function S(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",23),s.TgZ(1,"div",24),s.TgZ(2,"h4",25),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA(),s.TgZ(5,"div",26),s.TgZ(6,"div",27),s.TgZ(7,"p-calendar",28),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw(3).group.appointment.appointmentDate=t})("onMonthChange",function(t){return s.CHM(e),s.oxw(3).dateChangeEdit(t)})("onYearChange",function(t){return s.CHM(e),s.oxw(3).dateChangeEdit(t)})("onSelect",function(t){return s.CHM(e),s.oxw(3).getSlots(t)}),s.qZA(),s._UZ(8,"div"),s.qZA(),s.TgZ(9,"div",29),s.YNc(10,w,3,2,"span",30),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw(3);s.xp6(3),s.Oqu(s.lcZ(4,12,"DATE.SELECT")),s.xp6(4),s.Q6J("disabled",e.calendarOff)("inline",!0)("minDate",e.today)("ngModel",e.group.appointment.appointmentDate)("disabledDates",e.invalidDates)("firstDayOfWeek",1),s.xp6(1),s.Akn(s.DdM(14,M)),s.xp6(1),s.Akn(s.DdM(15,M)),s.xp6(1),s.Q6J("ngForOf",e.appointmentSlots)}}function O(e,t){1&e&&(s.TgZ(0,"span"),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"APPOINTMENT.RESCHEDULE")," "))}function I(e,t){1&e&&(s.TgZ(0,"span"),s._UZ(1,"i",38),s.qZA())}function D(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",36),s.TgZ(1,"button",37),s.NdJ("click",function(){return s.CHM(e),s.oxw(3).confirmReschedule()}),s.YNc(2,O,3,3,"span",0),s.YNc(3,I,2,0,"span",0),s.qZA(),s.qZA()}if(2&e){const e=s.oxw(3);s.xp6(1),s.Q6J("disabled",e.requesting),s.xp6(1),s.Q6J("ngIf",!e.requesting),s.xp6(1),s.Q6J("ngIf",e.requesting)}}function E(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"div",19),s.TgZ(2,"div",20),s.YNc(3,S,11,16,"div",21),s.YNc(4,D,4,3,"div",22),s.qZA(),s.qZA(),s.BQk()),2&e){const e=s.oxw(2);s.xp6(3),s.Q6J("ngIf",e.site),s.xp6(1),s.Q6J("ngIf",e.group.appointment.appointmentTime)}}function P(e,t){if(1&e&&(s.ynx(0),s.YNc(1,y,2,0,"p-messages",3),s.TgZ(2,"div",4),s.TgZ(3,"div",5),s.TgZ(4,"div",6),s.TgZ(5,"div",7),s.TgZ(6,"ul",8),s.TgZ(7,"li",9),s._uU(8),s.qZA(),s.TgZ(9,"li",10),s._uU(10),s.qZA(),s.qZA(),s.TgZ(11,"div",11),s.TgZ(12,"h4"),s.TgZ(13,"a",12),s._uU(14),s.qZA(),s.qZA(),s.TgZ(15,"p",13),s.TgZ(16,"span",14),s._uU(17),s.ALo(18,"translate"),s.qZA(),s._uU(19),s._UZ(20,"br"),s.TgZ(21,"span",14),s._uU(22),s.ALo(23,"translate"),s.qZA(),s._uU(24),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(25,E,5,2,"ng-container",0),s.BQk()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",!e.canEdit),s.xp6(7),s.hij(" ",e.day," "),s.xp6(2),s.hij(" ",e.month," "),s.xp6(4),s.Oqu(e.group.site.name),s.xp6(3),s.hij("",s.lcZ(18,9,"ADDRESS"),":"),s.xp6(2),s.hij(" ",e.group.site.address," "),s.xp6(3),s.hij("",s.lcZ(23,11,"TIME.SIMPLE"),":"),s.xp6(2),s.hij(" ",e.group.appointment.appointmentTime," "),s.xp6(1),s.Q6J("ngIf",e.canEdit&&e.editing&&e.rescheduling)}}let k=(()=>{class e{constructor(e,t,n,i,o,s,a){this.groupService=e,this.tokenStorage=t,this.confirmation=n,this.messageService=i,this.router=o,this.datepipe=s,this.siteService=a,this.group=new v.ZA,this.rescheduling=!1,this.today=new Date,this.calendarOff=!0,this.requesting=!1,this.editing=!1,this.canEdit=!0}ngOnInit(){this.user=this.tokenStorage.getUser(),this.getGroup(),console.log(this.user),console.log("AAAFTER GROOOOOOOOUUUP",this.groupClient),console.log(this.group),console.log(this.siteId)}ngOnChanges(){}getGroup(){this.groupService.getGroupByClient(this.user.id).subscribe(e=>{this.group=e[e.length-1],this.site=this.group.site,this.siteId=this.group.site.id.toString();let t=new Date(this.group.appointment.appointmentDate);this.day=t.getDate(),this.month=t.toLocaleString("default",{month:"short"}),t.getTime()-864e5<=(new Date).getTime()&&(this.canEdit=!1)})}dateChangeEdit(e){this.calendarOff=!0;let t=e.month,n=""+t;t<10&&(n="0"+t),this.getDisabledDates(n,e.year)}getSites(){this.siteService.getAllSites().subscribe(e=>{this.sites=e.filter(e=>0!=e.id)})}confirmDelete(){this.confirmation.confirm({message:"Are you sure that you want to cancel your appointment?",accept:()=>{this.editing=!0,this.groupService.cancelAppointment(this.group).subscribe(()=>{this.showToast("appointment","success","Success","Your appointment has been cancelled"),setTimeout(()=>{this.router.navigateByUrl("/profile/account").then(()=>{window.location.reload()})},3e3)},e=>{this.showToast("appointment","error","Could not cancel",e.message)})}})}reschedule(){this.getGroup(),this.getSites(),this.editing=!0,this.rescheduling=!0,this.appointment=new f.u,this.getDisabledDatesInit()}changeSite(){this.getDisabledDates((new Date).getUTCMonth.toString(),(new Date).getUTCFullYear()),this.getSlots(new Date)}getDisabledDatesInit(){let e=(new Date).getMonth()+1,t=""+e;e<10&&(t="0"+e);let n=(new Date).getFullYear();this.getDisabledDates(t,n)}getDisabledDates(e,t){this.appointmentSlots=[],this.siteService.getAllDisabledDates(this.siteId,"01/"+e+"/"+t,"31/"+e+"/"+t,1,3,1).subscribe(e=>{let t=[...e.map(e=>new Date(e.date))];this.invalidDates=[this.today,...t.map(e=>new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))],this.calendarOff=!1})}getSlots(e){let t=this.datepipe.transform(e,"dd/MM/yyyy");this.group.appointment.appointmentDate=e,this.siteService.getAppointmentSlots(this.site.id.toString(),t+"").subscribe(e=>{this.appointmentSlots=e})}setSlotedit(e){this.siteService.checkAppointementValidity(this.group.site.id.toString(),this.datepipe.transform(this.group.appointment.appointmentDate,"dd/MM/yyyy"),e,this.group.folders.length,this.group.folders[0].visa.typology.id,this.group.folders[0].visa.category.id).subscribe(t=>{t?this.group.appointment.appointmentTime=e:(this.group.appointment.appointmentTime=null,this.dateChangeEdit({month:this.group.appointment.appointmentDate.getMonth()+1,year:this.group.appointment.appointmentDate.getFullYear()}),this.getSlots(this.group.appointment.appointmentDate))})}slotIsBeforeNow(e){let t=new Date,n=Number(e.time.split(":")[0]),i=Number(e.time.split(":")[1]);if(this.appointment.appointmentDate){let e=this.appointment.appointmentDate.getDay(),o=this.appointment.appointmentDate.getMonth(),s=this.appointment.appointmentDate.getFullYear();if(t.getFullYear()==s&&t.getMonth()==o&&t.getDay()==e)return t.getHours()>n||t.getHours()===n&&t.getMinutes()>i}return!1}confirmReschedule(){this.requesting=!0,this.groupService.patchGroup(this.group).subscribe(()=>{this.requesting=!1,this.rescheduling=!1,this.editing=!1,this.showToast("appointment","success","Success","Your appointment has been rescheduled"),this.getGroup()},e=>{this.requesting=!1,console.log(e.message),this.showToast("appointment","error","Could not reschedule",e.message)})}showToast(e,t,n,i){this.messageService.add({key:e,severity:t,summary:n,detail:i,life:2700})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(p.l),s.Y36(a.i),s.Y36(r.YP),s.Y36(r.ez),s.Y36(o.F0),s.Y36(i.uU),s.Y36(T.P))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-appointment-edit"]],features:[s.TTD],decls:3,vars:1,consts:[[4,"ngIf"],["header","Confirmation","icon","pi pi-exclamation-triangle"],["position","bottom-center","key","appointment"],["severity","warn",4,"ngIf"],[1,"text-center"],[1,"card","event-schedule","rounded","border"],[1,"card-body"],[1,"d-flex"],[1,"date","text-center","text-primary","me-3","mb-0","list-unstyled"],[1,"day","fw-bold","mb-2"],[1,"month","fw-bold"],[1,"flex-1","content"],["routerLink","/contact",1,"text-primary","title"],[1,"text-muted","location-time"],[1,"text-dark","h6"],["severity","warn"],["pTemplate",""],[1,"pi","pi-exclamation-triangle"],[1,"ml-2"],[1,"row","pt-4"],["id","select-box",1,"margin-auto","col","w-form"],["class","col-md-12",4,"ngIf"],["class","reschedule pt-4",4,"ngIf"],[1,"col-md-12"],[1,"p-4"],[1,"title","mb-0"],[1,"row"],[1,"col-md-7"],["dateFormat","dd/mm/yy","placeholder","jj/mm/aaaa",3,"disabled","inline","minDate","ngModel","disabledDates","firstDayOfWeek","ngModelChange","onMonthChange","onYearChange","onSelect"],[1,"col-md-5","text-center"],["class","p-col",4,"ngFor","ngForOf"],[1,"p-col"],["pButton","","pRipple","","type","button","class","badge rounded-pill bg-soft-success",3,"label","value","click",4,"ngIf"],["pButton","","pRipple","","type","button","class","badge rounded-pill bg-soft-success","icon","pi pi-check-circle","iconPos","left",3,"label","value",4,"ngIf"],["pButton","","pRipple","","type","button",1,"badge","rounded-pill","bg-soft-success",3,"label","value","click"],["pButton","","pRipple","","type","button","icon","pi pi-check-circle","iconPos","left",1,"badge","rounded-pill","bg-soft-success",3,"label","value"],[1,"reschedule","pt-4"],[1,"btn","btn-primary","full-w",3,"disabled","click"],[1,"pi","pi-spin","pi-spinner",2,"font-size","1.25rem"]],template:function(e,t){1&e&&(s.YNc(0,P,26,13,"ng-container",0),s._UZ(1,"p-confirmDialog",1),s._UZ(2,"p-toast",2)),2&e&&s.Q6J("ngIf",t.group.appointment)},directives:[i.O5,A.Q,g.FN,o.yS,b.V,r.jx,x.f,i.sg,q.Hq],pipes:[d.X$],styles:[".ml-2[_ngcontent-%COMP%]{margin-left:1rem}[_nghost-%COMP%]  .p-message{margin-top:unset!important}[_nghost-%COMP%]     .q-section p-inputNumber{width:5.75rem;padding-right:.5rem;height:36px}[_nghost-%COMP%]     span.p-disabled{color:#e43f52!important;font-weight:lighter!important}[_nghost-%COMP%]     .p-datepicker td>span{color:#53b1de;font-weight:700}[_nghost-%COMP%]     .cat-typ-select .p-dropdown{width:22rem}[_nghost-%COMP%]     .mt-6{margin-top:3.5rem!important}[_nghost-%COMP%]     .p-messages{max-width:unset!important}[_nghost-%COMP%]     .p-inputmask{width:100%}[_nghost-%COMP%]     .p-inputtext{width:100%}[_nghost-%COMP%]     .p-calendar{width:100%}[_nghost-%COMP%]     .card .card-bodies{min-height:15rem}[_nghost-%COMP%]     .credit-card{padding-bottom:2.5rem;margin:auto;width:35rem}[_nghost-%COMP%]     .card-info{margin-top:2.75rem!important}[_nghost-%COMP%]     .padded-form{padding-left:10%;padding-right:10%}[_nghost-%COMP%]     .p-progress-spinner{width:1.5rem;height:auto;display:flex}.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.slide-fade-up-enter-active[_ngcontent-%COMP%]{transition:all .25s ease-in-out;transition-delay:.1s;position:relative}.slide-fade-up-leave-active[_ngcontent-%COMP%]{transition:all .25s ease-in-out;position:absolute}.slide-fade-up-enter[_ngcontent-%COMP%]{opacity:0;transform:translateY(15px);pointer-events:none}.slide-fade-up-leave-to[_ngcontent-%COMP%]{opacity:0;transform:translateY(-15px);pointer-events:none}.mb-6[_ngcontent-%COMP%]{margin-bottom:2.5rem}.section[_ngcontent-%COMP%]{padding-top:unset!important}.pad-top-buttons[_ngcontent-%COMP%]{padding-top:4rem;min-width:25rem}.doc-desc[_ngcontent-%COMP%]{text-justify:distribute;text-align:justify;white-space:pre-line}.cat-typ-select[_ngcontent-%COMP%]{align-items:center}.cat-typ-select[_ngcontent-%COMP%], .total-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.total-section[_ngcontent-%COMP%]{padding-right:1rem;padding-left:1rem}"]}),e})();var N=n(75472),L=n(94753);class Y{}var J=n(73115);let F=(()=>{class e{constructor(e){this.httpClient=e,this.API_URL=J.N.serverIP+"/api/upload"}upload(e,t,n){const i=new FormData;return i.append("file",e),i.append("folderId",t.toString()),i.append("docType",n),this.httpClient.post(this.API_URL,i,{reportProgress:!0,observe:"events"})}delete(e){let t=(new N.LE).append("path",e);return this.httpClient.delete(this.API_URL+"/delete",{params:t})}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(N.eN))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Q=(()=>{class e{constructor(e){this.uploadService=e}ngOnInit(){this.upload=this.folder.uploadedDocuments.find(e=>e.path==this.path)}dismiss(){this.activeModal.close()}deleteUpload(){this.uploadService.delete(this.path).subscribe(()=>{this.folder.uploadedDocuments=[...this.folder.uploadedDocuments.filter(e=>e.path!=this.path)],this.dismiss()},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(F))},e.\u0275cmp=s.Xpm({type:e,selectors:[["delete-upload"]],inputs:{path:"path",folder:"folder",activeModal:"activeModal"},decls:24,vars:17,consts:[[1,"modal-content","rounded","shadow","border-0"],["modal",""],[1,"modal-body","py-2"],[1,"mt-2","text-center"],[1,"mt-2"],[1,"row","p-sides",2,"padding-top","0.5rem","padding-bottom","0.5rem"],[1,"col-6",2,"text-align","start"],[1,"col-6",2,"text-align","end"],[1,"btn","btn-danger","mr-2",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0,1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s._uU(4),s.ALo(5,"translate"),s._UZ(6,"br"),s._UZ(7,"br"),s._uU(8),s._UZ(9,"br"),s._UZ(10,"br"),s._uU(11),s.ALo(12,"translate"),s.ALo(13,"date"),s.qZA(),s.TgZ(14,"div",4),s.TgZ(15,"div",5),s._UZ(16,"div",6),s.TgZ(17,"div",7),s.TgZ(18,"a",8),s.NdJ("click",function(){return t.deleteUpload()}),s._uU(19),s.ALo(20,"translate"),s.qZA(),s.TgZ(21,"a",9),s.NdJ("click",function(){return t.dismiss()}),s._uU(22),s.ALo(23,"translate"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(4),s.hij(" ",s.lcZ(5,6,"UPLOAD.DELETE")," "),s.xp6(4),s.hij(" ",t.upload.docType," "),s.xp6(3),s.AsE(" ",s.lcZ(12,8,"UPLOAD.DATE")," ",s.xi3(13,10,t.upload.uploadDate,"dd/MM/yyyy HH:mm")," "),s.xp6(8),s.hij(" ",s.lcZ(20,13,"DELETE")," "),s.xp6(3),s.hij(" ",s.lcZ(23,15,"CLOSE")," "))},pipes:[d.X$,i.uU],styles:[".mr-2[_ngcontent-%COMP%]{margin-right:.5rem}"]}),e})();var j=n(58309);const R=function(){return{maxWidth:"70%",maxHeight:"70%"}};function B(e,t){if(1&e&&s._UZ(0,"img",2),2&e){const e=s.oxw();s.Akn(s.DdM(3,R)),s.s9C("src",e.uploadPath,s.LSH)}}const H=function(){return{marginRight:".5 rem !important",marginBottom:".5 rem !important"}};function V(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",6),s.TgZ(1,"button",7),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).prevPage()}),s._UZ(2,"span",8),s.qZA(),s._uU(3),s.TgZ(4,"button",7),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).nextPage()}),s._UZ(5,"span",9),s.qZA(),s.qZA()}if(2&e){const e=s.oxw(2);s.xp6(1),s.Akn(s.DdM(8,H)),s.Q6J("disabled",1==e.page),s.xp6(2),s.AsE(" ",e.page," / ",e.totalPages," "),s.xp6(1),s.Akn(s.DdM(9,H)),s.Q6J("disabled",e.page==e.totalPages)}}const z=function(){return{height:"90%"}};function $(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",3),s.TgZ(1,"pdf-viewer",4),s.NdJ("page-rendered",function(){return s.CHM(e),s.oxw().pageRendered()})("after-load-complete",function(t){return s.CHM(e),s.oxw().afterLoadComplete(t)}),s.qZA(),s.YNc(2,V,6,10,"div",5),s.qZA()}if(2&e){const e=s.oxw();s.xp6(1),s.Akn(s.DdM(9,z)),s.Q6J("src",e.uploadPath)("show-all",!1)("autoresize",!1)("original-size",!0)("fit-to-page",!0)("page",e.page),s.xp6(1),s.Q6J("ngIf",e.isLoaded&&e.totalPages>1)}}let G=(()=>{class e{constructor(){this.page=1,this.isLoaded=!1,this.isPDFClicked=!1}ngOnInit(){this.extension=this.path.substring(this.path.lastIndexOf(".")+1),this.uploadPath=J.N.serverIP+"/uploads/"+this.path}pageRendered(){this.pdfComponent.pdfViewer.currentScaleValue="page-fit"}afterLoadComplete(e){this.totalPages=e._pdfInfo.numPages,this.isLoaded=!0}nextPage(){this.page!=this.totalPages&&this.page++}prevPage(){1!=this.page&&this.page--}dissmiss(){this.activeModal.close()}click(e){("pdf"===this.extension&&(null==e||null==e||"pdfViewer removePageBorders"==e.className)||"pdf"!==this.extension&&"centered ng-star-inserted"!==e.className)&&this.activeModal.close()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["display-upload"]],viewQuery:function(e,t){if(1&e&&s.Gf(j.rQ,5),2&e){let e;s.iGM(e=s.CRH())&&(t.pdfComponent=e.first)}},hostBindings:function(e,t){1&e&&s.NdJ("keydown.ArrowRight",function(){return t.nextPage()},!1,s.Jf7)("keydown.ArrowLeft",function(){return t.prevPage()},!1,s.Jf7)("keydown.escape",function(){return t.dissmiss()},!1,s.Jf7)("mousedown",function(e){return t.click(e.target)},!1,s.Jf7)},inputs:{path:"path",activeModal:"activeModal"},decls:3,vars:2,consts:[["class","centered","alt","Uploaded",3,"src","style",4,"ngIf"],["class","modal-backdrop centered",4,"ngIf"],["alt","Uploaded",1,"centered",3,"src"],[1,"modal-backdrop","centered"],[3,"src","show-all","autoresize","original-size","fit-to-page","page","page-rendered","after-load-complete"],["class","arrows wrapper",4,"ngIf"],[1,"arrows","wrapper"],["pButton","",1,"p-panel-header-icon","p-link","no-label",3,"disabled","click"],[1,"pi","pi-angle-left","inline"],[1,"pi","pi-angle-right","inline"]],template:function(e,t){1&e&&(s.TgZ(0,"div"),s.YNc(1,B,1,4,"img",0),s.qZA(),s.YNc(2,$,3,10,"div",1)),2&e&&(s.xp6(1),s.Q6J("ngIf","pdf"!=t.extension),s.xp6(1),s.Q6J("ngIf","pdf"==t.extension))},directives:[i.O5,j.rQ,q.Hq],styles:["[_nghost-%COMP%]     .modal-backdrop{background-color:transparent!important;height:90vh}.centered[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}.arrows[_ngcontent-%COMP%]{position:fixed;top:100%;left:48%}.wrapper[_ngcontent-%COMP%]{color:#fff;text-align:center;white-space:nowrap;overflow-x:auto;padding-bottom:.5rem}.inline[_ngcontent-%COMP%]{display:inline-block!important}"]}),e})();var W=n(67550),X=n(76181),K=n(45384);function ee(e,t){1&e&&s.GkF(0)}function te(e,t){1&e&&s.GkF(0)}const ne=function(e){return{$implicit:e}};function ie(e,t){if(1&e&&(s.ynx(0),s.YNc(1,te,1,0,"ng-container",4),s.BQk()),2&e){const e=s.oxw().$implicit,t=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",t.markerTemplate)("ngTemplateOutletContext",s.VKq(2,ne,e))}}function oe(e,t){1&e&&s._UZ(0,"div",10)}function se(e,t){1&e&&s._UZ(0,"div",11)}function ae(e,t){1&e&&s.GkF(0)}function re(e,t){if(1&e&&(s.TgZ(0,"div",2),s.TgZ(1,"div",3),s.YNc(2,ee,1,0,"ng-container",4),s.qZA(),s.TgZ(3,"div",5),s.YNc(4,ie,2,4,"ng-container",6),s.YNc(5,oe,1,0,"ng-template",null,7,s.W1O),s.YNc(7,se,1,0,"div",8),s.qZA(),s.TgZ(8,"div",9),s.YNc(9,ae,1,0,"ng-container",4),s.qZA(),s.qZA()),2&e){const e=t.$implicit,n=t.last,i=s.MAs(6),o=s.oxw();s.xp6(2),s.Q6J("ngTemplateOutlet",o.oppositeTemplate)("ngTemplateOutletContext",s.VKq(7,ne,e)),s.xp6(2),s.Q6J("ngIf",o.markerTemplate)("ngIfElse",i),s.xp6(3),s.Q6J("ngIf",!n),s.xp6(2),s.Q6J("ngTemplateOutlet",o.contentTemplate)("ngTemplateOutletContext",s.VKq(9,ne,e))}}const le=function(e,t,n,i,o,s,a){return{"p-timeline p-component":!0,"p-timeline-left":e,"p-timeline-right":t,"p-timeline-top":n,"p-timeline-bottom":i,"p-timeline-alternate":o,"p-timeline-vertical":s,"p-timeline-horizontal":a}};let pe=(()=>{class e{constructor(e){this.el=e,this.align="left",this.layout="vertical"}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"opposite":this.oppositeTemplate=e.template;break;case"marker":this.markerTemplate=e.template}})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.SBq))},e.\u0275cmp=s.Xpm({type:e,selectors:[["p-timeline"]],contentQueries:function(e,t,n){if(1&e&&s.Suo(n,r.jx,4),2&e){let e;s.iGM(e=s.CRH())&&(t.templates=e)}},hostAttrs:[1,"p-element"],inputs:{value:"value",style:"style",styleClass:"styleClass",align:"align",layout:"layout"},decls:2,vars:13,consts:[[3,"ngStyle","ngClass"],["class","p-timeline-event",4,"ngFor","ngForOf"],[1,"p-timeline-event"],[1,"p-timeline-event-opposite"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-timeline-event-separator"],[4,"ngIf","ngIfElse"],["marker",""],["class","p-timeline-event-connector",4,"ngIf"],[1,"p-timeline-event-content"],[1,"p-timeline-event-marker"],[1,"p-timeline-event-connector"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.YNc(1,re,10,11,"div",1),s.qZA()),2&e&&(s.Tol(t.styleClass),s.Q6J("ngStyle",t.style)("ngClass",s.Hh0(5,le,"left"===t.align,"right"===t.align,"top"===t.align,"bottom"===t.align,"alternate"===t.align,"vertical"===t.layout,"horizontal"===t.layout)),s.xp6(1),s.Q6J("ngForOf",t.value))},directives:[i.PC,i.mk,i.sg,i.tP,i.O5],styles:[".p-timeline{display:flex;flex-grow:1;flex-direction:column}.p-timeline-left .p-timeline-event-opposite{text-align:right}.p-timeline-left .p-timeline-event-content{text-align:left}.p-timeline-right .p-timeline-event{flex-direction:row-reverse}.p-timeline-right .p-timeline-event-opposite{text-align:left}.p-timeline-right .p-timeline-event-content{text-align:right}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(2n){flex-direction:row-reverse}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-opposite{text-align:right}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(2n) .p-timeline-event-opposite,.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-content{text-align:left}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(2n) .p-timeline-event-content{text-align:right}.p-timeline-event{display:flex;position:relative;min-height:70px}.p-timeline-event:last-child{min-height:0}.p-timeline-event-content,.p-timeline-event-opposite{flex:1;padding:0 1rem}.p-timeline-event-separator{flex:0;display:flex;align-items:center;flex-direction:column}.p-timeline-event-marker{display:flex;align-self:baseline}.p-timeline-event-connector{flex-grow:1}.p-timeline-horizontal{flex-direction:row}.p-timeline-horizontal .p-timeline-event{flex-direction:column;flex:1}.p-timeline-horizontal .p-timeline-event:last-child{flex:0}.p-timeline-horizontal .p-timeline-event-separator{flex-direction:row}.p-timeline-horizontal .p-timeline-event-connector{width:100%}.p-timeline-bottom .p-timeline-event,.p-timeline-horizontal.p-timeline-alternate .p-timeline-event:nth-child(2n){flex-direction:column-reverse}"],encapsulation:2,changeDetection:0}),e})(),de=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[i.ez],r.m8]}),e})();function ce(e,t){1&e&&(s._UZ(0,"button",30),s.TgZ(1,"button",31),s._UZ(2,"span",32),s.qZA())}function ge(e,t){if(1&e&&(s.TgZ(0,"button",34),s.ALo(1,"translate"),s._UZ(2,"span",32),s.qZA()),2&e){const e=s.oxw().$implicit;s.s9C("pTooltip",s.lcZ(1,1,"DOCUMENTS_LIST."+e.visaDocument.title+".DESCRIPTION"))}}function ue(e,t){1&e&&(s.TgZ(0,"div"),s.TgZ(1,"p"),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.hij(" ",s.lcZ(3,1,"UPLOAD.SUCCESS")," "))}const me=function(e){return{"progress-bar progress-bar-info progress-bar-striped":!0,"upload-success":e}},he=function(e){return{width:e}};function Ze(e,t){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"div",35),s.TgZ(2,"div",36),s._uU(3),s.qZA(),s.qZA(),s.YNc(4,ue,4,3,"div",0),s.qZA()),2&e){const e=s.oxw().$implicit,t=s.oxw(2);s.xp6(2),s.Q6J("ngClass",s.VKq(5,me,t.successUpload[e.visaDocument.title]))("ngStyle",s.VKq(7,he,t.progress+"%")),s.uIk("aria-valuenow",t.progress),s.xp6(1),s.hij(" ",t.progress,"% "),s.xp6(1),s.Q6J("ngIf",t.successUpload[e.visaDocument.title])}}function fe(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"p-panel",33),s.ALo(2,"translate"),s.YNc(3,ge,3,3,"ng-template",11),s.YNc(4,Ze,5,9,"div",0),s.qZA(),s.BQk()),2&e){const e=t.$implicit,n=s.oxw(2);s.xp6(1),s.Q6J("header",s.lcZ(2,4,"DOCUMENTS_LIST."+e.visaDocument.id+".TITLE"))("toggleable",n.startedUpload[e.visaDocument.title])("collapsed",!n.startedUpload[e.visaDocument.title]),s.xp6(3),s.Q6J("ngIf",n.startedUpload[e.visaDocument.title])}}function ve(e,t){if(1&e&&(s.TgZ(0,"span",37),s._UZ(1,"i",38),s.qZA()),2&e){const e=t.$implicit;s.Udp("background-color",e.color),s.xp6(1),s.Q6J("ngClass",e.icon)}}function Te(e,t){if(1&e&&(s._uU(0),s.ALo(1,"translate")),2&e){const e=t.$implicit;s.AsE(" ",s.lcZ(1,2,"MSG."+e.msg)," ",e.site," ")}}function Ae(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"h4"),s._uU(6),s.ALo(7,"titlecase"),s.ALo(8,"titlecase"),s.qZA(),s.TgZ(9,"p-divider",5),s.TgZ(10,"div",6),s._UZ(11,"i",7),s.TgZ(12,"div",8),s._uU(13),s.ALo(14,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(15,"div",9),s.TgZ(16,"p-panel",10),s.ALo(17,"translate"),s.YNc(18,ce,3,0,"ng-template",11),s.qZA(),s.qZA(),s.TgZ(19,"p-divider",5),s.TgZ(20,"div",6),s._UZ(21,"i",12),s.TgZ(22,"div",8),s._uU(23),s.ALo(24,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(25,"div",13),s.YNc(26,fe,5,6,"ng-container",14),s.qZA(),s.TgZ(27,"p-divider",5),s.TgZ(28,"div",6),s._UZ(29,"i",15),s.TgZ(30,"div",8),s._uU(31),s.ALo(32,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(33,"div",9),s.TgZ(34,"div",16),s.TgZ(35,"div",17),s.TgZ(36,"div",18),s.TgZ(37,"ul",19),s.TgZ(38,"li",20),s._uU(39),s.qZA(),s.TgZ(40,"li",21),s._uU(41),s.qZA(),s.qZA(),s.TgZ(42,"div",22),s.TgZ(43,"h4"),s.TgZ(44,"a",23),s.NdJ("click",function(){return s.CHM(e),s.oxw().dismiss()}),s._uU(45),s.qZA(),s.qZA(),s.TgZ(46,"p",24),s.TgZ(47,"span",25),s._uU(48),s.ALo(49,"translate"),s.qZA(),s._uU(50),s._UZ(51,"br"),s.TgZ(52,"span",25),s._uU(53),s.ALo(54,"translate"),s.qZA(),s._uU(55),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(56,"div",26),s.TgZ(57,"p-timeline",27),s.YNc(58,ve,2,3,"ng-template",28),s.YNc(59,Te,2,4,"ng-template",29),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(6),s.AsE(" ",s.lcZ(7,17,e.folder.person.name)," ",s.lcZ(8,19,e.folder.person.surname)," "),s.xp6(7),s.hij(" ",s.xi3(14,21,"VISA","{count: 1}")," "),s.xp6(3),s.Q6J("header",s.lcZ(17,24,"VISAS_LIST."+e.folder.visa.id+".TITLE"))("toggleable",!1)("collapsed",!0),s.xp6(7),s.hij(" ",s.xi3(24,26,"DOCUMENT.SIMPLE","{count: 2}")," "),s.xp6(3),s.Q6J("ngForOf",e.folder.visa.orderedVisaDocuments),s.xp6(5),s.hij(" ",s.lcZ(32,29,"APPOINTMENT.SIMPLE")," "),s.xp6(8),s.Oqu(e.day),s.xp6(2),s.Oqu(e.month),s.xp6(4),s.Oqu(e.site.name),s.xp6(3),s.hij("",s.lcZ(49,31,"ADDRESS"),":"),s.xp6(2),s.hij(" ",e.site.address," "),s.xp6(3),s.hij("",s.lcZ(54,33,"TIME.SIMPLE"),":"),s.xp6(2),s.hij(" ",e.appointment.appointmentTime," "),s.xp6(2),s.Q6J("value",e.stat)}}let be=(()=>{class e{constructor(e,t,n,i){this.tokenStorage=e,this.groupService=t,this.uploadService=n,this.uploadModal=i,this.group=new v.ZA,this.appointment=new f.u,this.site=new Y,this.folder=new L.gt,this.step=0,this.progress=0,this.startedUpload=[],this.successUpload=[],this.uploadedFiles=[],this.defaultClr="#b9b1e2",this.clearClr="#84e184"}ngOnInit(){this.user=this.tokenStorage.getUser(),this.getGroup()}getGroup(){this.groupService.getGroupByClient(this.user.id).subscribe(e=>{this.group=e[e.length-1],console.table(this.group.folders[0].visa.orderedVisaDocuments),this.appointment=this.group.appointment;const t=new Date(this.appointment.appointmentDate);this.day=t.getDate(),this.month=t.toLocaleString("default",{month:"short"}),this.site=this.group.site,this.folder=this.group.folders[0],this.stat=[{msg:"CREATED",site:"",color:this.defaultClr,icon:r.dv.TIMES},{msg:"TREATMENT",site:this.group.site.name,color:this.defaultClr,icon:r.dv.TIMES},{msg:"OS_SP_HUB",site:"",color:this.defaultClr,icon:r.dv.TIMES},{msg:"IS_HUB_SP",site:"",color:this.defaultClr,icon:r.dv.TIMES},{msg:"OS_HUB_CONS",site:"",color:this.defaultClr,icon:r.dv.TIMES},{msg:"IS_CONS",site:"",color:this.defaultClr,icon:r.dv.TIMES},{msg:"OS_CONS_HUB",site:this.group.site.name,color:this.defaultClr,icon:r.dv.TIMES},{msg:"IS_HUB",site:this.group.site.name,color:this.defaultClr,icon:r.dv.TIMES},{msg:"OS_HUB_SP",site:this.group.site.name,color:this.defaultClr,icon:r.dv.TIMES},{msg:"IS_SP",site:this.group.site.name,color:this.defaultClr,icon:r.dv.TIMES},{msg:"OS_SP_CLI",site:this.group.site.name,color:this.defaultClr,icon:r.dv.TIMES},{msg:"OS_HUB_CR",site:"",color:this.defaultClr,icon:r.dv.TIMES}],console.log(this.folder.status),this.messages(),console.log(this.step),this.loop()})}messages(){switch(this.folder.status){case L.qb.CREATED:case L.qb.RECEIVED:case L.qb.CASHOUT_RECEPTION:case L.qb.CASHOUT_WAITING:case L.qb.WAITING_ROOM:this.step=0;break;case L.qb.TREATMENT:case L.qb.CALLED:case L.qb.COMPLIANT_QUALITY:case L.qb.COMPLIANT_VALIDITY:case L.qb.NON_COMPLIANT_QUALITY:case L.qb.NON_COMPLIANT_VALIDITY:this.step=1,this.stat[this.step].site=this.group.site.name;break;case L.qb.DELIVERED_TO_HUB:this.step=2;break;case L.qb.RECEIVED_IN_HUB:this.step=3;break;case L.qb.DELIVERED_EMBASSY:case L.qb.ADD_REC_DELIVERED:case L.qb.ADD_REC_RECEPTION:this.step=4;break;case L.qb.EMBASSY_RECEIVED:this.step=5;break;case L.qb.EMBASSY_DELIVERED_CENTER:this.step=6,this.stat[this.step].site=this.group.site.name;break;case L.qb.EMBASSY_RETURNED:this.step=7,this.stat[this.step].site=this.group.site.name;break;case L.qb.DELIVERED_TO_SITE:this.step=8,this.stat[this.step].site=this.group.site.name;break;case L.qb.RECEIVED_FROM_HUB:this.step=9,this.stat[this.step].site=this.group.site.name;break;case L.qb.DELIVERED_CLIENT:this.step=10,this.stat[this.step].site=this.group.site.name;break;case L.qb.PACKAGE_DELIVERED:this.step=11}}loop(){for(let e=0;e<=this.step;e++)this.stat[e].color=this.clearClr,this.stat[e].icon=r.dv.CHECK,this.stat[this.step+1].icon=r.dv.SPINNER,this.stat[this.step+1].color="#ffad33",console.log(this.stat[e])}dismiss(){}upload(e,t){this.uploadService.upload(e.srcElement.files[0],this.folder.folderId,t).subscribe(e=>{this.startedUpload[t]=!0,e.type===N.dt.UploadProgress?this.progress=Math.round(100*e.loaded/e.total):e instanceof N.Zn&&(this.successUpload[t]=!0,this.uploadedFiles[t]=e.body.path,this.folder.uploadedDocuments.push(e.body))},()=>{this.progress=0})}visualizeUpload(e){this.openedModal=this.uploadModal.open(G,{backdrop:!1,centered:!0}),this.hidden=!0,this.openedModal.componentInstance.path=this.uploadedFiles[e],this.openedModal.componentInstance.activeModal=this.openedModal,this.startedUpload[e]=!1,this.openedModal.componentInstance.docType=e,this.unBlur()}openDeleteModal(e){this.openedModal=this.uploadModal.open(Q,{centered:!0}),this.hidden=!0,this.openedModal.componentInstance.path=this.uploadedFiles[e],this.openedModal.componentInstance.activeModal=this.openedModal,this.startedUpload[e]=!1,this.openedModal.componentInstance.folder=this.folder,this.unBlur()}reloadUploadDocuments(){this.uploadedFiles=[],this.folder.uploadedDocuments.forEach(e=>{this.uploadedFiles[e.docType]=e.path})}unBlur(){this.openedModal.result.then(()=>{this.hidden=!1,this.reloadUploadDocuments()},()=>{this.hidden=!1,this.reloadUploadDocuments()})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(a.i),s.Y36(p.l),s.Y36(F),s.Y36(W.FF))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-folder"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"modal-content","rounded","shadow","border-0","pb-4"],[1,"modal-body","py-2"],[1,"text-center"],[1,"mt-4"],["align","left"],[2,"display","inline-flex","align-items","center"],[1,"pi","pi-globe","text-secondary",2,"margin-right","0.5rem"],[1,"text-secondary"],[1,"p-sides"],[1,"custom-panel",3,"header","toggleable","collapsed"],["pTemplate","icons"],[1,"pi","pi-file","text-secondary",2,"margin-right","0.5rem"],[1,"p-sides",2,"padding-top","unset !important"],[4,"ngFor","ngForOf"],[1,"pi","pi-calendar","text-secondary",2,"margin-right","0.5rem"],[1,"card","event-schedule","rounded","border"],[1,"card-body"],[1,"d-flex"],[1,"date","text-center","text-primary","me-3","mb-0","list-unstyled"],[1,"day","fw-bold","mb-2"],[1,"month","fw-bold"],[1,"flex-1","content"],["routerLink","/contact",1,"text-primary","title",3,"click"],[1,"text-muted","location-time"],[1,"text-dark","h6"],[1,"card","mt-4","marginal-sides"],["align","alternate","styleClass","customized-timeline m-5",3,"value"],["pTemplate","marker"],["pTemplate","content"],[2,"opacity","0"],["pButton","","pTooltip","\n                  'VISAS_LIST.' + folder.visa.id + '.DESCRIPTION' | translate\n                ","tooltipEvent","focus","tooltipPosition","right","tooltipStyleClass","desc-tooltip",1,"p-panel-header-icon","p-link","no-label"],[1,"pi","pi-info-circle"],[1,"custom-accordion",3,"header","toggleable","collapsed"],["pButton","","tooltipEvent","focus","tooltipPosition","right","tooltipStyleClass","desc-tooltip",1,"p-panel-header-icon","p-link","no-label",3,"pTooltip"],[1,"progress"],["ngClass","","role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngClass","ngStyle"],[1,"custom-marker","p-shadow-2"],[3,"ngClass"]],template:function(e,t){1&e&&s.YNc(0,Ae,60,35,"div",0),2&e&&s.Q6J("ngIf",t.folder.person)},directives:[i.O5,X.i,K.s,r.jx,i.sg,o.yS,pe,q.Hq,i.mk,i.PC],pipes:[i.rS,d.X$],styles:[".no-label>.p-button-label{display:none}[_nghost-%COMP%]     .p-panel .p-panel-content, [_nghost-%COMP%]     .p-panel .p-panel-header{border-radius:0}[_nghost-%COMP%]     .custom-accordion:not(:last-child) .p-panel .p-panel-content, [_nghost-%COMP%]     .custom-accordion:not(:last-child) .p-panel .p-panel-header{border-bottom:unset}[_nghost-%COMP%]     .custom-accordion:first-child .p-panel .p-panel-header{border-top-left-radius:3px;border-top-right-radius:3px}[_nghost-%COMP%]     .custom-accordion:last-child .p-panel .p-panel-header{border-bottom-left-radius:3px;border-bottom-right-radius:3px}[_nghost-%COMP%]     .custom-panel .p-panel-header{border-radius:3px}[_nghost-%COMP%]     div.modal-content{background:transparent;border:0}.p-sides[_ngcontent-%COMP%]{padding-left:1.25rem;padding-right:1.25rem}.modal-body[_ngcontent-%COMP%]{scrollbar-width:thin}.event-schedule[_ngcontent-%COMP%]:hover{transform:unset;box-shadow:0 0 3px rgba(60,72,88,.15)}.blurred[_ngcontent-%COMP%]{filter:blur(2px);-webkit-filter:blur(2px)}.upload-success[_ngcontent-%COMP%]{background-color:#93cc20}.custom-marker[_ngcontent-%COMP%]{display:flex;width:2rem;height:2rem;align-items:center;justify-content:center;color:#fff;border-radius:50%;z-index:1}  .p-timeline-event-content,   .p-timeline-event-opposite{line-height:1}@media screen and (max-width:960px){  .customized-timeline .p-timeline-event:nth-child(2n){flex-direction:row!important}  .customized-timeline .p-timeline-event:nth-child(2n) .p-timeline-event-content{text-align:left!important}  .customized-timeline .p-timeline-event-opposite{flex:0}  .customized-timeline .p-card{margin-top:1rem}}.marginal-sides[_ngcontent-%COMP%]{margin:0 1.25rem}"]}),e})();function xe(e,t){1&e&&(s._UZ(0,"button",32),s.TgZ(1,"button",33),s._UZ(2,"span",34),s.qZA())}function qe(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",37),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw().openDeleteModal(t.visaDocument.title)}),s._UZ(1,"span",38),s.qZA(),s.TgZ(2,"button",37),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw().visualizeUpload(t.visaDocument.title)}),s._UZ(3,"span",39),s.qZA(),s.TgZ(4,"button",40),s._UZ(5,"span",41),s.qZA(),s.TgZ(6,"button",42),s.ALo(7,"translate"),s._UZ(8,"span",34),s.qZA()}if(2&e){const e=s.oxw().$implicit,t=s.oxw();s.Q6J("hidden",!t.uploadedFiles[e.visaDocument.title]),s.xp6(2),s.Q6J("hidden",!t.uploadedFiles[e.visaDocument.title]),s.xp6(2),s.Q6J("disabled",!0)("hidden",t.uploadedFiles[e.visaDocument.title]),s.xp6(2),s.s9C("pTooltip",s.lcZ(7,5,"DOCUMENTS_LIST."+e.visaDocument.id+".DESCRIPTION"))}}function _e(e,t){1&e&&(s.TgZ(0,"div"),s.TgZ(1,"p"),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.hij(" ",s.lcZ(3,1,"UPLOAD.SUCCESS")," "))}const ye=function(e){return{"progress-bar progress-bar-info progress-bar-striped":!0,"upload-success":e}},Ce=function(e){return{width:e}};function Ue(e,t){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"div",43),s.TgZ(2,"div",44),s._uU(3),s.qZA(),s.qZA(),s.YNc(4,_e,4,3,"div",36),s.qZA()),2&e){const e=s.oxw().$implicit,t=s.oxw();s.xp6(2),s.Q6J("ngClass",s.VKq(5,ye,t.successUpload[e.visaDocument.title]))("ngStyle",s.VKq(7,Ce,t.progress+"%")),s.uIk("aria-valuenow",t.progress),s.xp6(1),s.hij(" ",t.progress,"% "),s.xp6(1),s.Q6J("ngIf",t.successUpload[e.visaDocument.title])}}function we(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"p-panel",35),s.ALo(2,"translate"),s.YNc(3,qe,9,7,"ng-template",12),s.YNc(4,Ue,5,9,"div",36),s.qZA(),s.BQk()),2&e){const e=t.$implicit,n=s.oxw();s.xp6(1),s.Q6J("header",s.lcZ(2,4,"DOCUMENTS_LIST."+e.visaDocument.id+".TITLE"))("toggleable",n.startedUpload[e.visaDocument.title])("collapsed",!n.startedUpload[e.visaDocument.title]),s.xp6(3),s.Q6J("ngIf",n.startedUpload[e.visaDocument.title])}}const Me=function(e){return{blurred:e}};let Se=(()=>{class e{constructor(e,t,n){this.activeModal=e,this.uploadService=t,this.uploadModal=n,this.progress=0,this.startedUpload=[],this.successUpload=[],this.uploadedFiles=[]}ngOnInit(){const e=new Date(this.appointment.appointmentDate);this.day=e.getDate(),this.month=e.toLocaleString("default",{month:"short"}),this.folder.visa.orderedVisaDocuments.forEach(e=>{this.startedUpload[e.visaDocument.title]=!1,this.successUpload[e.visaDocument.title]=!1}),this.folder.uploadedDocuments.forEach(e=>{this.uploadedFiles[e.docType]=e.path})}dismiss(){this.activeModal.dismissAll()}upload(e,t){this.uploadService.upload(e.srcElement.files[0],this.folder.folderId,t).subscribe(e=>{this.startedUpload[t]=!0,e.type===N.dt.UploadProgress?this.progress=Math.round(100*e.loaded/e.total):e instanceof N.Zn&&(this.successUpload[t]=!0,this.uploadedFiles[t]=e.body.path,this.folder.uploadedDocuments.push(e.body))},()=>{this.progress=0})}visualizeUpload(e){this.openedModal=this.uploadModal.open(G,{backdrop:!1,centered:!0}),this.hidden=!0,this.openedModal.componentInstance.path=this.uploadedFiles[e],this.openedModal.componentInstance.activeModal=this.openedModal,this.startedUpload[e]=!1,this.openedModal.componentInstance.docType=e,this.unBlur()}openDeleteModal(e){this.openedModal=this.uploadModal.open(Q,{centered:!0}),this.hidden=!0,this.openedModal.componentInstance.path=this.uploadedFiles[e],this.openedModal.componentInstance.activeModal=this.openedModal,this.startedUpload[e]=!1,this.openedModal.componentInstance.folder=this.folder,this.unBlur()}reloadUploadDocuments(){this.uploadedFiles=[],this.folder.uploadedDocuments.forEach(e=>{this.uploadedFiles[e.docType]=e.path})}unBlur(){this.openedModal.result.then(()=>{this.hidden=!1,this.reloadUploadDocuments()},()=>{this.hidden=!1,this.reloadUploadDocuments()})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(W.FF),s.Y36(F),s.Y36(W.FF))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-folder-details"]],inputs:{folder:"folder",appointment:"appointment",site:"site"},decls:64,vars:37,consts:[[3,"ngClass"],[1,"modal-content","rounded","shadow","border-0"],[1,"modal-body","py-2"],[1,"text-center"],[1,"mt-4"],[1,"badge","rounded-pill","bg-soft-primary"],["align","left"],[2,"display","inline-flex","align-items","center"],[1,"pi","pi-globe","text-secondary",2,"margin-right","0.5rem"],[1,"text-secondary"],[1,"p-sides"],["header","\n                'VISAS_LIST.' + folder.visa.id + '.TITLE' | translate\n              ",1,"custom-panel",3,"toggleable","collapsed"],["pTemplate","icons"],[1,"pi","pi-file","text-secondary",2,"margin-right","0.5rem"],[1,"p-sides",2,"padding-top","unset !important"],[4,"ngFor","ngForOf"],[1,"pi","pi-calendar","text-secondary",2,"margin-right","0.5rem"],[1,"card","event-schedule","rounded","border"],[1,"card-body"],[1,"d-flex"],[1,"date","text-center","text-primary","me-3","mb-0","list-unstyled"],[1,"day","fw-bold","mb-2"],[1,"month","fw-bold"],[1,"flex-1","content"],["routerLink","contact",1,"text-primary","title",3,"click"],[1,"text-muted","location-time"],[1,"text-dark","h6"],[1,"mt-2"],[1,"row","p-sides",2,"padding-top","1.5rem","padding-bottom","1.5rem"],[1,"col-6",2,"text-align","start"],[1,"col-6",2,"text-align","end"],[1,"btn","btn-primary",3,"click"],[2,"opacity","0"],["pButton","","pTooltip","\n                    'VISAS_LIST.' + folder.visa.id + '.DESCRIPTION' | translate\n                  ","tooltipEvent","focus","tooltipPosition","right","tooltipStyleClass","desc-tooltip",1,"p-panel-header-icon","p-link","no-label"],[1,"pi","pi-info-circle"],[1,"custom-accordion",3,"header","toggleable","collapsed"],[4,"ngIf"],["pButton","",1,"p-panel-header-icon","p-link","no-label",3,"hidden","click"],[1,"pi","pi-trash"],[1,"pi","pi-eye"],["pButton","",1,"p-panel-header-icon","p-link","no-label",3,"disabled","hidden"],[1,"pi","pi-eye-slash"],["pButton","","tooltipEvent","focus","tooltipPosition","right","tooltipStyleClass","desc-tooltip",1,"p-panel-header-icon","p-link","no-label",3,"pTooltip"],[1,"progress"],["ngClass","","role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngClass","ngStyle"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s.TgZ(5,"h4"),s._uU(6),s.ALo(7,"titlecase"),s.ALo(8,"titlecase"),s.qZA(),s.TgZ(9,"span",5),s._uU(10),s.ALo(11,"translate"),s.qZA(),s.TgZ(12,"p-divider",6),s.TgZ(13,"div",7),s._UZ(14,"i",8),s.TgZ(15,"div",9),s._uU(16),s.ALo(17,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(18,"div",10),s.TgZ(19,"p-panel",11),s.YNc(20,xe,3,0,"ng-template",12),s.qZA(),s.qZA(),s.TgZ(21,"p-divider",6),s.TgZ(22,"div",7),s._UZ(23,"i",13),s.TgZ(24,"div",9),s._uU(25),s.ALo(26,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(27,"div",14),s.YNc(28,we,5,6,"ng-container",15),s.qZA(),s.TgZ(29,"p-divider",6),s.TgZ(30,"div",7),s._UZ(31,"i",16),s.TgZ(32,"div",9),s._uU(33),s.ALo(34,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(35,"div",10),s.TgZ(36,"div",17),s.TgZ(37,"div",18),s.TgZ(38,"div",19),s.TgZ(39,"ul",20),s.TgZ(40,"li",21),s._uU(41),s.qZA(),s.TgZ(42,"li",22),s._uU(43),s.qZA(),s.qZA(),s.TgZ(44,"div",23),s.TgZ(45,"h4"),s.TgZ(46,"a",24),s.NdJ("click",function(){return t.dismiss()}),s._uU(47),s.qZA(),s.qZA(),s.TgZ(48,"p",25),s.TgZ(49,"span",26),s._uU(50),s.ALo(51,"translate"),s.qZA(),s._uU(52),s._UZ(53,"br"),s.TgZ(54,"span",26),s._uU(55,"Time:"),s.qZA(),s._uU(56),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(57,"div",27),s.TgZ(58,"div",28),s._UZ(59,"div",29),s.TgZ(60,"div",30),s.TgZ(61,"a",31),s.NdJ("click",function(){return t.dismiss()}),s._uU(62),s.ALo(63,"translate"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.Q6J("ngClass",s.VKq(35,Me,t.hidden)),s.xp6(6),s.AsE(" ",s.lcZ(7,17,t.folder.person.name)," ",s.lcZ(8,19,t.folder.person.surname)," "),s.xp6(4),s.hij(" ",s.lcZ(11,21,"STATUS."+t.folder.status)," "),s.xp6(6),s.hij(" ",s.xi3(17,23,"VISA","{count: 1}")," "),s.xp6(3),s.Q6J("toggleable",!1)("collapsed",!0),s.xp6(6),s.hij(" ",s.xi3(26,26,"DOCUMENT.SIMPLE","{count: 2}")," "),s.xp6(3),s.Q6J("ngForOf",t.folder.visa.orderedVisaDocuments),s.xp6(5),s.hij(" ",s.lcZ(34,29,"APPOINTMENT.SIMPLE")," "),s.xp6(8),s.Oqu(t.day),s.xp6(2),s.Oqu(t.month),s.xp6(4),s.Oqu(t.site.name),s.xp6(3),s.hij("",s.lcZ(51,31,"ADRESS"),":"),s.xp6(2),s.hij(" ",t.site.address," "),s.xp6(4),s.hij(" ",t.appointment.appointmentTime," "),s.xp6(6),s.Oqu(s.lcZ(63,33,"CLOSE")))},directives:[i.mk,X.i,K.s,r.jx,i.sg,o.yS,q.Hq,i.O5,i.PC],pipes:[i.rS,d.X$],styles:[".no-label>.p-button-label{display:none}[_nghost-%COMP%]     .p-panel .p-panel-content, [_nghost-%COMP%]     .p-panel .p-panel-header{border-radius:0}[_nghost-%COMP%]     .custom-accordion:not(:last-child) .p-panel .p-panel-content, [_nghost-%COMP%]     .custom-accordion:not(:last-child) .p-panel .p-panel-header{border-bottom:unset}[_nghost-%COMP%]     .custom-accordion:first-child .p-panel .p-panel-header{border-top-left-radius:3px;border-top-right-radius:3px}[_nghost-%COMP%]     .custom-accordion:last-child .p-panel .p-panel-header{border-bottom-left-radius:3px;border-bottom-right-radius:3px}[_nghost-%COMP%]     .custom-panel .p-panel-header{border-radius:3px}[_nghost-%COMP%]     div.modal-content{background:transparent;border:0}.p-sides[_ngcontent-%COMP%]{padding-left:1.25rem;padding-right:1.25rem}.modal-body[_ngcontent-%COMP%]{height:50rem;scrollbar-width:thin}.event-schedule[_ngcontent-%COMP%]:hover{transform:unset;box-shadow:0 0 3px rgba(60,72,88,.15)}.blurred[_ngcontent-%COMP%]{filter:blur(2px);-webkit-filter:blur(2px)}.upload-success[_ngcontent-%COMP%]{background-color:#93cc20}"]}),e})();function Oe(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",4),s.TgZ(1,"div",5),s._UZ(2,"img",6),s.TgZ(3,"div",7),s.TgZ(4,"a",8),s._uU(5),s.ALo(6,"titlecase"),s.ALo(7,"titlecase"),s.qZA(),s._UZ(8,"ul",9),s.TgZ(9,"a",10),s.NdJ("click",function(){const t=s.CHM(e).$implicit,n=s.oxw(2);return n.showFolder(t,n.group.appointment,n.group.site)}),s._UZ(10,"i-feather",11),s._uU(11),s.ALo(12,"translate"),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit,n=s.oxw(2);s.xp6(2),s.s9C("src",n.img,s.LSH),s.xp6(3),s.AsE("",s.lcZ(6,4,e.person.name)," ",s.lcZ(7,6,e.person.surname),""),s.xp6(6),s.hij(" ",s.lcZ(12,8,"CONSULT")," ")}}function Ie(e,t){if(1&e&&(s.TgZ(0,"div",2),s.YNc(1,Oe,13,10,"div",3),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.group.folders)}}let De=(()=>{class e{constructor(e,t,n){this.tokenStorage=e,this.groupService=t,this.modalService=n,this.img="assets/images/folder/folder-full.png",this.navClass="nav-light",this.group=new v.ZA}ngOnInit(){this.user=this.tokenStorage.getUser(),this.getGroup()}getGroup(){this.groupService.getGroupByClient(this.user.id).subscribe(e=>{this.group=e[e.length-1]})}showFolder(e,t,n){const i=this.modalService.open(Se,{size:"lg",windowClass:"modal-holder",centered:!0,scrollable:!0});i.componentInstance.folder=e,i.componentInstance.appointment=t,i.componentInstance.site=n}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(a.i),s.Y36(p.l),s.Y36(W.FF))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-group"]],decls:5,vars:4,consts:[[1,"rounded","shadow","p-4"],["class","row",4,"ngIf"],[1,"row"],["class","col-lg-6 col-md-4 mt-4 pt-2",4,"ngFor","ngForOf"],[1,"col-lg-6","col-md-4","mt-4","pt-2"],[1,"text-center"],["alt","",1,"avatar","avatar-medium",3,"src"],[1,"content","mt-3"],[1,"h5","text-dark"],[1,"list-unstyled","social-icon","social","mb-0","mt-2"],[1,"btn","btn-primary",3,"click"],["name","eye",1,"fea","icon-sm"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"h5"),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.YNc(4,Ie,2,1,"div",1),s.qZA()),2&e&&(s.xp6(2),s.Oqu(s.lcZ(3,2,"GROUP")),s.xp6(2),s.Q6J("ngIf",t.group&&t.group.folders))},directives:[i.O5,i.sg,c.uy],pipes:[d.X$,i.rS],styles:[""]}),e})();function Ee(e,t){1&e&&(s.TgZ(0,"div",25),s.TgZ(1,"div",26),s.TgZ(2,"h5",27),s._uU(3,"R\xe9clamation"),s.qZA(),s.TgZ(4,"button",28),s.NdJ("click",function(){return t.$implicit.dismiss("Cross click")}),s.TgZ(5,"span",29),s._uU(6,"\xd7"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"div",30),s.TgZ(8,"form"),s.TgZ(9,"div",31),s.TgZ(10,"div",32),s.TgZ(11,"div",33),s.TgZ(12,"label",34),s._uU(13,"Nom & Pr\xe9nom "),s.TgZ(14,"span",35),s._uU(15,"*"),s.qZA(),s.qZA(),s.TgZ(16,"div",36),s._UZ(17,"i-feather",37),s._UZ(18,"input",38),s.qZA(),s.qZA(),s.qZA(),s.TgZ(19,"div",32),s.TgZ(20,"div",33),s.TgZ(21,"label",34),s._uU(22,"Objet"),s.qZA(),s.TgZ(23,"div",36),s._UZ(24,"i-feather",39),s._UZ(25,"input",40),s.qZA(),s.qZA(),s.qZA(),s._UZ(26,"div",32),s.qZA(),s.qZA(),s.qZA(),s.TgZ(27,"div",41),s.TgZ(28,"button",42),s._uU(29,"Envoyer"),s.qZA(),s.qZA(),s.qZA())}function Pe(e,t){if(1&e&&(s.TgZ(0,"div",43),s.TgZ(1,"div",7),s.TgZ(2,"div",2),s.TgZ(3,"div",8),s._UZ(4,"input",44),s._UZ(5,"label",45),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"a",46),s.TgZ(7,"div",47),s._UZ(8,"img",48),s.TgZ(9,"div",49),s.TgZ(10,"h6",50),s._uU(11),s.qZA(),s.TgZ(12,"p",51),s._uU(13),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=t.$implicit;s.xp6(8),s.s9C("src",e.profile,s.LSH),s.xp6(3),s.Oqu(e.name),s.xp6(2),s.Oqu(e.content)}}let ke=(()=>{class e{constructor(e){this.modalService=e,this.navClass="nav-light",this.messageData=[{profile:"assets/images/alma_logo.png",name:"Sami Oueslati",content:"Bonjour, veuillez apporter votre assurance voyage si vous en avez pas une merci de faire le n\xe9cessaire. Cordialement"},{profile:"assets/images/alma_logo.png",name:"Hamdi Ben Nosra",content:"Bonjour, soyez ponctuel le jour de votre rendez-vous. Cordialement"},{profile:"assets/images/alma_logo.png",name:"Firas Buscemi",content:"Bonjour, vous avez certains documents manquants. Veuillez compl\xe9ter votre dossier. Cordialement"}]}ngOnInit(){}openComposeModal(e){this.modalService.open(e,{size:"lg",windowClass:"modal-holder",centered:!0})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(W.FF))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-inbox"]],decls:39,vars:1,consts:[[1,"rounded","shadow","p-4"],[1,"d-flex","align-items-center","justify-content-between"],[1,"mb-0"],["href","javascript:void(0)","data-bs-toggle","modal","data-bs-target","#composemail",1,"btn","btn-primary",3,"click"],["name","plus",1,"fea","icon-sm"],["content",""],[1,"d-flex","border-bottom","align-items-center","justify-content-between","bg-light","mt-4","p-3"],[1,"form-check","ps-0"],[1,"form-check"],["type","checkbox","value","","id","selectall",1,"form-check-input"],["for","selectall",1,"form-check-label"],["ngbDropdown","",1,"btn-group","dropdown-primary","me-2","mt-2"],["type","button","ngbDropdownToggle","","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-primary","dropdown-toggle"],["ngbDropdownMenu","",1,"dropdown-menu"],["href","javascript:void(0)",1,"dropdown-item"],["name","eye-off",1,"fea","icon-sm"],["name","corner-up-left",1,"fea","icon-sm"],["name","corner-up-right",1,"fea","icon-sm"],[1,"dropdown-divider"],["href","javascript:void(0)",1,"dropdown-item","text-danger"],["name","trash-2",1,"fea","icon-sm"],["class","d-flex border-bottom p-3",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","justify-content-between","mt-4"],[1,"text-muted","h6","mb-0"],["href","javascript:void(0)",1,"btn","btn-soft-primary","disabled"],[1,"modal-content","rounded","shadow","border-0"],[1,"modal-header"],["id","composemail-title",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"btn","close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-4"],[1,"row"],[1,"col-12"],[1,"mb-3"],[1,"form-label"],[1,"text-danger"],[1,"form-icon","position-relative"],["name","user",1,"fea","icon-sm","icons"],["name","name","id","name","type","text","placeholder","Nom & Pr\xe9nom",1,"form-control","ps-5"],["name","book",1,"fea","icon-sm","icons"],["name","subject","id","subject","placeholder","Objet",1,"form-control","ps-5"],[1,"border-top","p-4"],["type","button",1,"btn","btn-primary"],[1,"d-flex","border-bottom","p-3"],["type","checkbox","value","","id","mail1",1,"form-check-input"],["for","mail1",1,"form-check-label"],["href","javascript:void(0)"],[1,"d-flex","ms-2"],["alt","",1,"avatar","avatar-md-sm",3,"src"],[1,"flex-1","ms-3"],[1,"text-dark"],[1,"text-muted","mb-0"]],template:function(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h5",2),s._uU(3,"Messages"),s.qZA(),s.TgZ(4,"a",3),s.NdJ("click",function(){s.CHM(e);const n=s.MAs(8);return t.openComposeModal(n)}),s._UZ(5,"i-feather",4),s._uU(6," Composer "),s.qZA(),s.qZA(),s.YNc(7,Ee,30,0,"ng-template",null,5,s.W1O),s.TgZ(9,"div",6),s.TgZ(10,"div",7),s.TgZ(11,"div",2),s.TgZ(12,"div",8),s._UZ(13,"input",9),s.TgZ(14,"label",10),s._uU(15,"S\xe9lectionner tout"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(16,"div",11),s.TgZ(17,"button",12),s._uU(18," Action "),s.qZA(),s.TgZ(19,"div",13),s.TgZ(20,"a",14),s._UZ(21,"i-feather",15),s._uU(22," Marquer comme non-lu "),s.qZA(),s.TgZ(23,"a",14),s._UZ(24,"i-feather",16),s._uU(25," R\xe9pondre "),s.qZA(),s.TgZ(26,"a",14),s._UZ(27,"i-feather",17),s._uU(28," Transf\xe9rer "),s.qZA(),s._UZ(29,"div",18),s.TgZ(30,"a",19),s._UZ(31,"i-feather",20),s._uU(32," Supprimer "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(33,Pe,14,3,"div",21),s.TgZ(34,"div",22),s.TgZ(35,"span",23),s._uU(36,"Montrant 3 sur 3 Messages"),s.qZA(),s.TgZ(37,"a",24),s._uU(38,"Voir plus"),s.qZA(),s.qZA(),s.qZA()}2&e&&(s.xp6(33),s.Q6J("ngForOf",t.messageData))},directives:[c.uy,i.sg],styles:[".form-icon[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{left:18px!important}.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}"]}),e})();var Ne=n(24412);function Le(e,t){if(1&e&&s._UZ(0,"span",3),2&e){const e=s.oxw();s.Q6J("ngClass",e.icon)}}const Ye=["*"];let Je=(()=>{class e{containerClass(){return{"p-tag p-component":!0,"p-tag-info":"info"===this.severity,"p-tag-success":"success"===this.severity,"p-tag-warning":"warning"===this.severity,"p-tag-danger":"danger"===this.severity,"p-tag-rounded":this.rounded}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["p-tag"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",severity:"severity",value:"value",icon:"icon",rounded:"rounded"},ngContentSelectors:Ye,decls:5,vars:6,consts:[[3,"ngClass","ngStyle"],["class","p-tag-icon",3,"ngClass",4,"ngIf"],[1,"p-tag-value"],[1,"p-tag-icon",3,"ngClass"]],template:function(e,t){1&e&&(s.F$t(),s.TgZ(0,"span",0),s.Hsn(1),s.YNc(2,Le,1,1,"span",1),s.TgZ(3,"span",2),s._uU(4),s.qZA(),s.qZA()),2&e&&(s.Tol(t.styleClass),s.Q6J("ngClass",t.containerClass())("ngStyle",t.style),s.xp6(2),s.Q6J("ngIf",t.icon),s.xp6(2),s.Oqu(t.value))},directives:[i.mk,i.PC,i.O5],styles:[".p-tag{display:inline-flex;align-items:center;justify-content:center}.p-tag-icon,.p-tag-icon.pi,.p-tag-value{line-height:1.5}.p-tag.p-tag-rounded{border-radius:10rem}"],encapsulation:2,changeDetection:0}),e})(),Fe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[i.ez]]}),e})();function Qe(e,t){1&e&&(s.TgZ(0,"div"),s.TgZ(1,"span",3),s._uU(2,"Loading transactions"),s.qZA(),s.qZA())}function je(e,t){1&e&&s._UZ(0,"p-tag",23)}function Re(e,t){1&e&&s._UZ(0,"p-tag",24)}function Be(e,t){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"p-divider",5),s.TgZ(2,"div",6),s._UZ(3,"i",7),s.TgZ(4,"div",8),s._uU(5),s.ALo(6,"date"),s.qZA(),s.TgZ(7,"div",9),s.YNc(8,je,1,0,"p-tag",10),s.YNc(9,Re,1,0,"p-tag",11),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"div",12),s.TgZ(11,"div",13),s.TgZ(12,"div",14),s._UZ(13,"i-feather",15),s.TgZ(14,"div",16),s.TgZ(15,"h6",17),s._uU(16,"Amount"),s.qZA(),s.TgZ(17,"span",18),s._uU(18),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(19,"div",13),s.TgZ(20,"div",14),s._UZ(21,"i-feather",19),s.TgZ(22,"div",16),s.TgZ(23,"h6",17),s._uU(24,"Status"),s.qZA(),s.TgZ(25,"span",18),s._uU(26),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(27,"div",20),s.TgZ(28,"div",13),s.TgZ(29,"div",14),s._UZ(30,"i-feather",21),s.TgZ(31,"div",16),s.TgZ(32,"h6",17),s._uU(33,"Indicator"),s.qZA(),s.TgZ(34,"span",18),s._uU(35),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(36,"div",13),s.TgZ(37,"div",14),s._UZ(38,"i-feather",22),s.TgZ(39,"div",16),s.TgZ(40,"h6",17),s._uU(41,"Reference"),s.qZA(),s.TgZ(42,"span",18),s._uU(43),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=t.$implicit;s.xp6(5),s.hij(" ",s.xi3(6,7,e.transactionOn,"fullDate")," "),s.xp6(3),s.Q6J("ngIf",e.group),s.xp6(1),s.Q6J("ngIf",!e.group),s.xp6(9),s.hij(" ",e.serviceAmount," EGP "),s.xp6(8),s.hij(" ",e.bankResponse," "),s.xp6(9),s.hij(" ",e.paymentOrder.indicator," "),s.xp6(8),s.hij(" ",e.reference," ")}}function He(e,t){if(1&e&&(s.ynx(0),s.YNc(1,Be,44,10,"div",4),s.BQk()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.clientTransactions)}}function Ve(e,t){1&e&&(s.ynx(0),s.TgZ(1,"span",3),s._uU(2,"You haven't made any payments."),s.qZA(),s.BQk())}const ze=[{path:"account",component:Z},{path:"group",component:De},{path:"inbox",component:ke},{path:"folder",component:be},{path:"editappointment",component:k},{path:"payments",component:(()=>{class e{constructor(e){this.paymentService=e,this.loading=!0}ngOnInit(){this.loadTransactions()}loadTransactions(){this.paymentService.getClientTransactions().subscribe(e=>{this.clientTransactions=e,this.clientTransactions.length>1&&this.clientTransactions.sort(function(e,t){return new Date(t.transactionOn).getTime()-new Date(e.transactionOn).getTime()}),this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Ne.t))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-payments"]],decls:5,vars:3,consts:[[1,"modal-content","rounded","shadow","border-0","pb-4"],[1,"modal-body","py-2"],[4,"ngIf"],[1,"text-muted","m-4"],[4,"ngFor","ngForOf"],["align","left"],[2,"display","inline-flex","align-items","center"],[1,"pi","pi-sort-alt","text-secondary",2,"margin-right","0.5rem"],[1,"text-secondary","pb-03",2,"margin-right","0.5rem"],[1,"pb-03"],["value","Used",4,"ngIf"],["value","Unused","severity","success",4,"ngIf"],[1,"row"],[1,"col-md-6","mt-2","d-flex"],[1,"d-flex","align-items-center"],["name","dollar-sign",1,"fea","icon-ex-md","text-muted","me-3"],[1,"flex-1"],[1,"text-primary","mb-0"],[1,"text-muted"],["name","info",1,"fea","icon-ex-md","text-muted","me-3"],[1,"row","mt-4"],["name","check-circle",1,"fea","icon-ex-md","text-muted","me-3"],["name","copy",1,"fea","icon-ex-md","text-muted","me-3"],["value","Used"],["value","Unused","severity","success"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.YNc(2,Qe,3,0,"div",2),s.YNc(3,He,2,1,"ng-container",2),s.YNc(4,Ve,3,0,"ng-container",2),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngIf",t.loading),s.xp6(1),s.Q6J("ngIf",!t.loading&&t.clientTransactions.length>0),s.xp6(1),s.Q6J("ngIf",!t.loading&&!t.clientTransactions))},directives:[i.O5,i.sg,X.i,c.uy,Je],pipes:[i.uU],styles:[".pb-03[_ngcontent-%COMP%]{padding-bottom:.3rem}.pl-1[_ngcontent-%COMP%]{padding-left:1rem}"]}),e})()}];let $e=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[o.Bz.forChild(ze)],o.Bz]}),e})();var Ge=n(85848);let We=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[A.D,i.ez,$e,g.EV,c.p1,d.aw,X.x,K.Q,de,b.$,Ge.kW,x._8,Fe]]}),e})()}}]);